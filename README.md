To: [CodeLab](https://codelab4.turingscraft.com/)

From: [Noah Cardoza](https://github.com/NoahCardoza)

# Section ID NOT Verified

### Whoops!

While your site was more or less broken (unable to correctly add courses to everyone in my class) I spent a few minutes poking around in Chrome's Dev Tools.
I noticed that after making an API call to `https://codelab4.turingscraft.com/codelab/api/sections/accessCode/{accessCode}`, verifying the access code,
provided the access code exists, it will return the proper course info and ask the user to agree to
a set of terms. After the user accepts and click the next button, it will sending a request to
`https://codelab4.turingscraft.com/codelab/api/enrollments`. The body of which looks like:

```json
{
  "sectionId": 24,
  "userId": 42
}
```

Unlike the **access code** the **section id** is a sequential number. By moving it up and down I was able to enroll in a few more courses **WITHOUT AN ENROLLMENT KEY!**

![Result](result.png)

```js
fetch('https://codelab4.turingscraft.com/codelab/api/enrollments', {
    method: 'POST',
    headers: {
        'Accept': 'application/json, text/plain, */*',
        'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      sectionId: sectionId,
      userId: myId
    })
})
```
Since each course has only 10 "free trial" assignments it doesn't seem like a big deal.
Although my course has `discount` set to 5 initially so maybe I would be able to achieve **full access** to some courses?

While seemingly insignificant, this gives me access to each instructors information, including first name, last name, and email address.


![Exposed Data](exposed-data.png)


Plus, tight security and rigorous input validation is always a good practice.

Luckily, the server dose validate the `userId` by returning **403 FORBIDDEN** when using a different **userId**.

I hope this is helpful and this issue gets fixed in the near future.
